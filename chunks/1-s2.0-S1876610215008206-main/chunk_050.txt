 is combined with a solder stack which comprises a solderable top layer, e.g. an Ag layer, a Ti adhesion layer and a TiN diffusion barrier. Through optimization of the TiN diffusion barrier by process optimization and stuffing of the grain boundaries with oxygen, Al diffusion is prevented even during a strong annealing step. We show that the stuffing procedure can also be executed in-situ within the process chamber of the PVD machine, without interrupting the high vacuum process sequence, if the